var SchainValidator=function(){var o=function(n){return 2===n.length&&n[0]&&n[1]?/^\d+\.\d+$/.test(n[0])?0==n[1]||1==n[1]||(console.warn("Invalid schain: complete flag must be either 0 or 1"),!1):(console.warn("Invalid schain: version must be in the format <major>.<minor>"),!1):(console.warn("Invalid schain: There must be exactly 2 properties before 1st node: version and complete flag"),!1)},s=function(n,e){return n.length<3||!n[0]||!n[1]||!n[2]?(console.warn("Invalid schain: Schain node "+e+" does not have the minimum number of properties. asi, sid, and hp are required"),!1):n[0].startsWith("http:")||-1<n[0].indexOf("/")?(console.warn("Invalid schain: Schain node "+e+" asi should be the canonical domain name and exclude http and https"),!1):64<n[1].length?(console.warn("Invalid schain: Schain node "+e+" sid cannot be longer than 64 characters"),!1):0==n[2]||1==n[2]||(console.warn("Invalid schain: Schain node "+e+" hp must be either 0 or 1"),!1)};return{validateSchainString:function(n){if(!n||"string"!=typeof n)return!1;if(/\s/.test(n))return console.warn("Invalid schain: String cannot contain spaces"),!1;var e=n.split("!"),a=e.length;if(a<2)return console.warn("Invalid schain: Contains 0 nodes"),!1;for(var i=!0,t=0;t<a&&i;t++)var r=e[t].split(","),i=0===t?o(r):s(r,t);return i}}}();var ConsentManagement=function(n){var i=[],r={},o=[],c=[],p=[],u={gdpr:{locator:"__cmpLocator",functionName:"__cmp",command:"getConsentData",parameter:{name:"parameter",value:null},cb:function(n,a){m(n,a,"gdpr")},callName:"__cmpCall",returnName:"__cmpReturn"},tcf:{locator:"__tcfapiLocator",functionName:"__tcfapi",command:"addEventListener",parameter:{name:"version",value:2},cb:function(n,a){!a||"tcloaded"!==n.eventStatus&&"useractioncomplete"!==n.eventStatus||m({consentData:n.tcString,gdprApplies:n.gdprApplies},a,"tcf")},callName:"__tcfapiCall",returnName:"__tcfapiReturn"},ccpa:{locator:"__uspapiLocator",functionName:"__uspapi",command:"getUSPData",parameter:{name:"version",value:1},cb:function(n,a){m(n,a,"ccpa")},callName:"__uspapiCall",returnName:"__uspapiReturn"}};window.gdpr_consent||0===window.gdpr||"0"===window.gdpr?null!==window.gdpr&&void 0!==window.gdpr?r.gdpr={consentData:window.gdpr_consent,gdprApplies:1===Number(window.gdpr)}:r.gdpr=window.gdpr_consent:i.push("gdpr","tcf"),window.us_privacy?r.ccpa={uspString:window.us_privacy}:i.push("ccpa"),i.forEach(function(n,a){r[n]=null,o[a]=!1,c[a]=null});var d,l=!1;function t(n,a,e){return a&&typeof a[n]==typeof e?a[n]:e}function e(n,a){var e=t(n,window.rp_account_config?window.rp_account_config.rp_feature_set:void 0,a);return t(n,window.rp_feature_set,e)}function m(n,a,e){var t;l||(t=i.indexOf(e),!(o[t]=!0)!==a&&(r[e]=n),!l&&o.every(function(n){return n})&&(d=d&&clearTimeout(d),s()))}function s(){l||(l=!0,window.removeEventListener("message",_),r.gdpr||!1!==e("allow_auction_without_consent",!0)?n(r):console.warn&&console.warn("SmartTag exiting because it failed to get GDPR consent"))}function _(n){try{for(var a,e,t,r="string"==typeof n.data?JSON.parse(n.data):n.data,o=0;o<i.length;o++){var c=u[i[o]];if(r[c.returnName]){a=o,t=r[(e=c).returnName];break}}t&&t.callId===p[a]&&e.cb(t.returnValue,t.success)}catch(n){}}return{run:function(){var n,a;!function(){for(var a=null;!c.every(function(n){return null!==n})&&a!==window.top;){a=a?a.parent:window;for(var e=0;e<c.length;e++){var t=u[i[e]];try{!c[e]&&a[t.functionName]&&(c[e]=a)}catch(n){try{!c[e]&&a.frames[t.locator]&&(c[e]=a)}catch(n){}}}}}(),n=i.indexOf("tcf"),a=i.indexOf("gdpr"),c[n]&&c[a]&&(c[a]=null),("boolean"==typeof window.rp_async_cmp?window.rp_async_cmp:void 0!==window.rp_account_config&&"boolean"==typeof window.rp_account_config.rp_async_cmp&&window.rp_account_config.rp_async_cmp)&&0<e("timeout",0)&&(d=setTimeout(s,e("timeout",0)),window.addEventListener("message",_)),i.forEach(function(n,a){var e,t=u[n],r=c[a];if(r)try{r[t.functionName](t.command,t.parameter.value,t.cb)}catch(n){d?(p[a]="st-"+Math.random(),(e={})[t.callName]={callId:p[a],command:t.command},e[t.callName][t.parameter.name]=t.parameter.value,r.postMessage(e,"*")):o[a]=!0}else o[a]=!0}),l||d&&!o.every(function(n){return n})||s()}}};var rp_account_config={rp_feature_set:{}};var RubiconAdServing=RubiconAdServing||{};RubiconAdServing.AdSizes={1:{dim:"468x60"},2:{dim:"728x90"},3:{dim:"234x60"},4:{dim:"88x31"},5:{dim:"120x90"},6:{dim:"120x60"},7:{dim:"125x125"},8:{dim:"120x600"},9:{dim:"160x600"},10:{dim:"300x600"},11:{dim:"180x150"},12:{dim:"120x240"},13:{dim:"200x200"},14:{dim:"250x250"},15:{dim:"300x250"},16:{dim:"336x280"},17:{dim:"240x400"},18:{dim:"180x150"},19:{dim:"300x100"},20:{dim:"0x0"},21:{dim:"0x0"},22:{dim:"0x0"},23:{dim:"120x90"},24:{dim:"160x90"},25:{dim:"180x90"},26:{dim:"200x90"},27:{dim:"468x15"},28:{dim:"728x15"},29:{dim:"300x850"},30:{dim:"1x1"},31:{dim:"980x120"},32:{dim:"250x360"},33:{dim:"180x500"},34:{dim:"580x400"},35:{dim:"980x150"},36:{dim:"140x350"},37:{dim:"468x400"},38:{dim:"930x180"},39:{dim:"750x100"},40:{dim:"750x200"},41:{dim:"750x300"},42:{dim:"2x4"},43:{dim:"320x50"},44:{dim:"300x50"},45:{dim:"480x75"},46:{dim:"480x60"},47:{dim:"240x37"},48:{dim:"300x300"},49:{dim:"336x280"},50:{dim:"1024x90"},51:{dim:"768x90"},52:{dim:"1004x768"},53:{dim:"1024x768",interstitial:!0},54:{dim:"300x1050"},55:{dim:"970x90"},56:{dim:"900x250"},57:{dim:"970x250"},58:{dim:"1000x90"},59:{dim:"320x80"},60:{dim:"320x150"},61:{dim:"1000x1000"},62:{dim:"980x50"},63:{dim:"1000x40"},64:{dim:"580x500"},65:{dim:"640x480"},66:{dim:"930x600"},67:{dim:"320x480",interstitial:!0},68:{dim:"1800x1000"},69:{dim:"480x400"},70:{dim:"1100x210"},71:{dim:"852x210"},72:{dim:"320x320"},73:{dim:"320x160"},74:{dim:"1250x240"},75:{dim:"1250x250"},76:{dim:"265x720"},77:{dim:"265x600"},78:{dim:"980x240"},79:{dim:"980x300"},80:{dim:"980x400"},81:{dim:"450x150"},82:{dim:"300x75"},83:{dim:"480x300"},84:{dim:"320x480"},85:{dim:"300x120"},86:{dim:"300x250"},87:{dim:"950x90"},88:{dim:"300x600"},89:{dim:"300x1200"},90:{dim:"548x150"},91:{dim:"300x250"},92:{dim:"728x90"},93:{dim:"160x600"},94:{dim:"970x310"},95:{dim:"970x100"},96:{dim:"970x210"},97:{dim:"467x120"},98:{dim:"1000x120"},99:{dim:"300x250"},100:{dim:"300x250"},101:{dim:"480x320",interstitial:!0},102:{dim:"768x1024",interstitial:!0},103:{dim:"480x280"},104:{dim:"1250x360"},105:{dim:"250x800"},106:{dim:"300x480"},107:{dim:"440x220"},108:{dim:"320x240"},109:{dim:"468x120"},110:{dim:"994x66"},111:{dim:"1250x480"},112:{dim:"1366x40"},113:{dim:"1000x300"},114:{dim:"505x500"},115:{dim:"480x150"},116:{dim:"950x250"},117:{dim:"320x100"},118:{dim:"160x410"},119:{dim:"256x600"},120:{dim:"994x250"},121:{dim:"1280x800",interstitial:!0},122:{dim:"800x1280",interstitial:!0},123:{dim:"650x110"},124:{dim:"640x150"},125:{dim:"800x250"},126:{dim:"200x600"},127:{dim:"994x118"},144:{dim:"980x600"},147:{dim:"840x150"},148:{dim:"720x480"},152:{dim:"1000x250"},158:{dim:"840x250"},159:{dim:"320x250"},179:{dim:"250x600"},185:{dim:"800x600",interstitial:!0},192:{dim:"728x40"},193:{dim:"970x66"},195:{dim:"600x300"},198:{dim:"640x360"},199:{dim:"640x200"},209:{dim:"1400x400"},213:{dim:"1030x590"},218:{dim:"760x120"},219:{dim:"1920x1080"},221:{dim:"1x1"},228:{dim:"970x150"},232:{dim:"580x400"},257:{dim:"400x600"},260:{dim:"970x400"}};var RubiconAdServing=RubiconAdServing||{};RubiconAdServing.Utils={getProtocol:function(){return"https"==(RubiconAdServing.Utils.isIframe()&&RubiconAdServing.Utils.isIframeCrossDomain()?location.href.split(":"):window.top.location.href.split(":"))[0]?"https://":"http://"},isIframe:function(){return window!=top},isIframeCrossDomain:function(){var e=!1;try{window.top.location.href||(e=!0)}catch(t){e=!0}return e}},RubiconAdServing.Creatives=function(){RubiconAdServing.creatives=RubiconAdServing.creatives||{},this.setAd=function(t,e){t&&e&&(RubiconAdServing.creatives[t]=e)},this.getAd=function(t){return t?RubiconAdServing.creatives[t]:null},this.getAdBySlot=function(t){return this.getAd(t)},this.getAdByZone=function(t,e,i){var r=t+"/"+e+"/"+i;return this.getAd(r)},this.renderAdBySlot=function(t){var e=this.getAd(t);e&&"ok"==e.status&&e.script&&document.write("<script>"+e.script+"<\/script>")},this.renderAdByZone=function(t,e,i){var r=t+"/"+e+"/"+i,n=this.getAd(r);n&&"ok"==n.status&&n.script&&document.write("<script>"+n.script+"<\/script>")}},RubiconAdServing.Requests=function(){RubiconAdServing.requests=RubiconAdServing.requests||{},RubiconAdServing.timers=RubiconAdServing.timers||{},this.addRequest=function(t,e){RubiconAdServing.requests[t]=e},this.getRequest=function(t){return RubiconAdServing.requests[t]},this.sendRequest=function(t){var e,i=this.getRequest(t);i&&i.slot&&(i.context.rp_debug?document.write(i.url):(e=i.slot.shouldRouteToRFM()?'<div id="'+i.context.rp_div_id+'"><script type="text/javascript" src="'+i.url+'"><\/script></div>':"iframe"==i.context.rp_adtype?'<iframe frameborder="0" allowtransparency="true" hspace="0"  vspace="0" marginheight="0" marginwidth="0" scrolling="no"  width="'+i.context.rp_width+'px" height="'+i.context.rp_height+'px" src="'+i.url+'"></iframe>':'<script type="text/javascript" src="'+i.url+'"><\/script>',i.timer&&(RubiconAdServing.timers[t]=new Date),document.write(e)))}},RubiconAdServing.timeRequest=function(t,e,i,r){var n,o,s,c,a=new Date;RubiconAdServing.timers.hasOwnProperty(t)&&(n=RubiconAdServing.timers[t],delete RubiconAdServing.timers[t],o=a-n,s=RubiconAdServing.Utils.getProtocol()+"stats.aws.rubiconproject.com/stats/latency/"+e+"/"+i+"/"+r+"/"+o,(c=document.createElement("img")).src=s,c.width=0,c.height=0,document.getElementsByTagName("body")[0].appendChild(c))},RubiconAdServing.RubiconAd=function(){this.config={server:"revv",host:"smarttag.rubiconproject.com",hosts:{revv:{beta:"staged-by.rubiconproject.com",prod:"smarttag.rubiconproject.com"},rfm:{beta:"mrp.rubiconproject.com",prod:"mrp.rubiconproject.com"}}},this.default_context={rp_env:"prod",rp_adtype:"js",rp_kw:null,rp_gender:null,rp_age:null,rp_age_range:null,rp_age_dob:null,rp_ethnicity:null,rp_xpi:null,rp_page:null,rp_geo:{},rp_aso:{},rp_badvid:[],rp_fastlane:!1,rp_async_cmp:!1,rp_feature_set:{visibility:!0,expandable:!0,local_storage:!0,rfm_routing:!1,tablet_mapping:!1,first_party_data:!0,rtp_first_look:!1,rtp_data_collection:!1,jit_sync:!0,jit_sync_android:!1,floor_is_rtb_only:!0,custom_host:null,custom_host_sites:[],latency_sampling:0,latency_sampling_sites:[]},rp_dpf:!1,rp_navigator:null,rp_schain:null},this.mergeProperties=function(t,e){if(void 0===t||!t)return e;for(var i in e)void 0===t[i]?t[i]=e[i]:null!=t[i]&&"object"==typeof t[i]&&this.mergeProperties(t[i],e[i]);return t},this.init=function(t){try{var e,i;if(this.default_context.rp_div_id="rp-"+new Number(Math.floor(1e6*Math.random())).toString(36),this.context=t?this.mergeProperties(t,this.default_context):this.default_context,this.browser=new o(this.context.rp_navigator||navigator),this.context.rp_zonesize&&(e=this.context.rp_zonesize.split("-"),this.context.rp_zone=e[0],this.context.rp_size_id=e[1]),this.context.rp_lat&&!this.isValidLat(this.context.rp_lat)&&delete this.context.rp_lat,this.context.rp_long&&!this.isValidLong(this.context.rp_long)&&delete this.context.rp_long,this.context.rp_geo&&this.context.rp_geo.latitude&&!this.isValidLat(this.context.rp_geo.latitude)&&delete this.context.rp_geo.latitude,this.context.rp_geo&&this.context.rp_geo.longitude&&!this.isValidLong(this.context.rp_geo.longitude)&&delete this.context.rp_geo.longitude,rp_account_config&&(this.context=this.mergeProperties(rp_account_config,this.context),!rp_account_config.site_config||(i=rp_account_config.site_config[this.context.rp_site])&&(this.context=this.mergeProperties(i,this.context),i.zone_config&&(this.context=this.mergeProperties(i.zone_config[this.context.rp_zone],this.context))),this.shouldSplitTablet()&&this.context.tablet_map.site_id&&this.context.tablet_map.zone_id&&(this.context.rp_site=this.context.tablet_map.site_id,this.context.rp_zone=this.context.tablet_map.zone_id,this.context.rp_zonesize=this.context.rp_zone+"-"+this.context.rp_size_id)),this.context.rp_rtb_tier=this.context.rp_rtb_tier||this.context.rp_pmp_tier,this.context.rp_feature_set.floor_is_rtb_only&&(this.context.rp_rtb_floor=this.context.rp_floor||this.context.rp_rtb_floor,this.context.rp_floor=null),this.shouldRouteToRFM()&&(this.config.server="rfm"),this.context.rp_env&&(this.config.host=this.config.hosts[this.config.server][this.context.rp_env]||this.config.hosts[this.config.server].prod||this.config.host),this.context.rp_feature_set.custom_host){var r=this.context.rp_feature_set.custom_host_sites;if(M(r))for(var n=0;n<r.length;n++)if(r[n]==this.context.rp_site){this.config.host=this.context.rp_feature_set.custom_host;break}}this.context.rp_slot||(this.context.rp_slot=this.context.rp_site+"_"+this.context.rp_size_id),this.context.rp_host&&(this.config.host=this.context.rp_host)}catch(t){}},this.isValidLat=function(t){return null!=t&&-90<=t&&t<=90},this.isValidLong=function(t){return null!=t&&-180<=t&&t<=180},this.shouldSplitTablet=function(){return this.context.rp_feature_set.tablet_mapping&&this.browser.detectiPad()},this.shouldRouteToRFM=function(){return this.context.rp_feature_set.rfm_routing_always||this.context.rp_feature_set.rfm_routing&&this.browser.detectiPad()&&"js"==this.context.rp_adtype},this.start=function(){var t,e,i=!1,r="https://";if((!this.context.rp_fastlane||this.context.rp_feature_set.fastlane_eligible)&&("jsonp"!=this.context.rp_adtype?(e=r+this.config.host+"/a/$account_id$/$site_id$/$zonesize$.$format$?",e+="$gdpr$$gdpr_consent$$us_privacy$$rp_schain$$rp_lmt$$cb$$floor$$rtb_floor$$smart$$referrer$$smartfile$$storagetype$$localstorage$",e+="$keyword$$gender$$age$$agerange$$agedob$$ethnicity$$tracking$$user_key$$fbid$$xpi$",e+="$tg_i$$tg_v$$p_app$$p_device$$p_accept$$p_interstitial$$dpf$$rtb_tier$$aso$$block_keys$",e+="$p_geo$$p_lat$$p_long$$p_screen_res$$slot$$ad_id$$badvid$",this.shouldRouteToRFM()&&(e=r+this.config.host+"/ad_request?$div_id$$app_id$$pub_id$$rand_cb$",e+="$rfm_lat$$rfm_lng$$rfm_ad_size$")):(t=this.context.rp_fastlane?"/a/api/fastlane.$format$":"/a/api/ads.$format$",e=r+this.config.host+t+"?enc=url&account_id=$account_id$&site_id=$site_id$&zone_id=$zone_id$&size_id=$size_id$",e+="$gdpr$$gdpr_consent$$us_privacy$$rp_schain$$rp_lmt$$cb$$floor$$rtb_floor$$smart$$referrer$$smartfile$$storagetype$$localstorage$",e+="$keyword$$gender$$age$$agerange$$agedob$$ethnicity$$tracking$$user_key$$fbid$$xpi$",e+="$tg_i$$tg_v$$p_app$$p_device$$p_accept$$p_interstitial$$dpf$$rtb_tier$$aso$$block_keys$",e+="$p_geo$$p_lat$$p_long$$p_screen_res$$slot$$ad_id$$badvid$",this.context.rp_ae_spoof&&(e=this.context.rp_ae_spoof)),e+="$rp_secure$",e=B("gdpr_consent","gdpr_consent",this.context.gdpr_consent,e),e=B("gdpr","gdpr",this.context.gdpr,e),e=B("us_privacy","us_privacy",this.context.us_privacy,e),e+="$digitrust.id$$digitrust.preference$",this.context.rp_account&&this.context.rp_site&&this.context.rp_zonesize)){e=q("account_id",this.context.rp_account,e),e=q("site_id",this.context.rp_site,e),e=q("zonesize",this.context.rp_zonesize,e),e=q("zone_id",this.context.rp_zone,e),e=q("size_id",this.context.rp_size_id,e),e=q("format","iframe"==this.context.rp_adtype?"html":this.context.rp_adtype,e);var n,o,s,c=null;try{if(this.context.rp_page&&0<this.context.rp_page.length)c=escape(this.context.rp_page);else if(RubiconAdServing.Utils.isIframe()){var a=document.referrer;try{"string"==typeof window.parent.location.href&&"http"==window.parent.location.href.substr(0,4)&&(a=top.location.href||a)}catch(t){}a&&0<a.length&&(c=escape(a))}}catch(t){i=!0}e=B("referrer","rf",c,e),this.context.rp_feature_set.aso_override||(this.context.rp_aso={}),!this.context.rp_feature_set.expandable||"exp"in this.context.rp_aso||(this.context.rp_aso.exp=this.getSupportExpandableAd()?1:null),!this.context.rp_feature_set.visibility||"pos"in this.context.rp_aso||(this.context.rp_aso.pos=N()),e=this.appendObject("aso","p",this.context.rp_aso,e,"_"),e=B("slot","ad_slot",this.context.rp_slot,e),e=B("ad_id","ad_id",this.context.rp_ad,e),e=B("p_screen_res","p_screen_res",F(),e),e=B("rp_lmt","rp_lmt",this.context.rp_lmt,e),e=B("cb","cb",Math.random(),e),e=B("keyword","kw",this.context.rp_kw,e),e=B("gender","gender",this.context.rp_gender,e),e=B("age","age",this.context.rp_age,e),e=B("agerange","age_range",this.context.rp_age_range,e),e=B("agedob","age_dob",this.context.rp_age_dob,e),e=B("ethnicity","ethnicity",this.context.rp_ethnicity,e),e=null!=this.context.rp_lat&&null!=this.context.rp_long?(e=B("p_lat","p_lat",this.context.rp_lat,e),B("p_long","p_long",this.context.rp_long,e)):(e=B("p_lat","p_lat",null,e),B("p_long","p_long",null,e)),e=B("xpi","xpi",this.context.rp_xpi,e),e=this.context.rp_rtb_floor?(n={standard:1,override:2,priority:3,private:4},o=null,this.context.rp_rtb_tier&&this.context.rp_rtb_tier in n&&(o=n[this.context.rp_rtb_tier]),e=B("rtb_floor","rp_floor",this.context.rp_rtb_floor,e),e=B("rtb_tier","rp_pmp_tier",o,e),B("dpf","rp_dpf",this.context.rp_dpf?"1":null,e)):(e=B("rtb_floor","rp_floor",null,e),e=B("rtb_tier","rp_pmp_tier",null,e),B("dpf","rp_dpf",null,e)),e=this.context.rp_floor?B("floor","rp_hard_floor",this.context.rp_floor,e):B("floor","rp_hard_floor",null,e),e=B("block_keys","p_block_keys",this.context.rp_blocks,e),e=B("tracking","tk_code",this.context.rp_tracking,e),e=B("user_key","tk_user_key",this.context.rp_user_key,e),e=B("smart","tk_st",i?"0":"1",e),e=B("smartfile","tk_sf",this.context.rp_smartfile?"1":null,e),e=this.context.rp_feature_set.first_party_data?(e=this.appendObject("tg_i","tg_i",this.context.rp_inventory,e),this.appendObject("tg_v","tg_v",this.context.rp_visitor,e)):(e=this.appendObject("tg_i","tg_i",null,e),this.appendObject("tg_v","tg_v",null,e)),e=B("div_id","div",this.context.rp_div_id,e,!0),e=B("app_id","app",this.context.rp_app_id,e),e=B("pub_id","pub",this.context.rp_publisher_id,e),e=B("rand_cb","id",Number(1e17*Math.random()).toString(36),e),e=B("rfm_lat","lat",this.context.rp_geo.latitude,e),e=B("rfm_lng","lng",this.context.rp_geo.longitude,e);var p=!1;if(RubiconAdServing.AdSizes&&this.context.rp_size_id&&RubiconAdServing.AdSizes[this.context.rp_size_id]&&("0x0"==(s=RubiconAdServing.AdSizes[this.context.rp_size_id].dim)&&(s=null),p=RubiconAdServing.AdSizes[this.context.rp_size_id].interstitial),e=B("rfm_ad_size","sze",s,e),e=B("fbid","x_fbid",this.context.rp_facebook_device_id,e),e=this.appendObject("p_app","p_app",this.context.rp_app,e),e=this.appendObject("p_device","p_device",this.context.rp_device,e),e=this.appendObject("p_geo","p_geo",this.context.rp_geo,e),e=this.appendObject("p_accept","p_accept",this.context.rp_accept,e),e=B("p_interstitial","p_instl",p?1:null,e),this.context.rp_badvid&&M(this.context.rp_badvid)){for(var d,_="",u=0;u<this.context.rp_badvid.length;u++)d=this.context.rp_badvid[u],parseInt(d)==d&&(_+=d+",");_.length&&(_=_.substr(0,_.length-1)),e=B("badvid","x_badvid",_,e)}else e=B("badvid","x_badvid",null,e);e=B("rp_secure","rp_secure",1,e);var l,h,g,f=null,b=null;try{l=typeof DigiTrust.getIdentitySync}catch(t){l=!1}if(this.context.rp_feature_set.digitrust&&l&&((h=DigiTrust.getIdentitySync({member:"rubicon"}))&&h.success&&h.identity&&(f=(g=h.identity).id,b=g.privacy.optout?1:0)),e=B("digitrust.id","dt.id",f,e),e=B("digitrust.preference","dt.preference",b,e),this.context.rp_feature_set.local_storage&&this.browser.detectSafari()){var v=[];if(data=RubiconAdServing.getStoredData(),data&&data.fcaps&&data.fcaps.sizes){var x=data.fcaps.sizes;for(var $ in x)if(x[$].ads)for(var m in x[$].ads)v[v.length]="ls_fcap."+$+"="+m+",0x"+x[$].ads[m].count.toString(16)+",0x"+x[$].ads[m].first_seen.toString(16)+",0x"+x[$].ads[m].last_seen.toString(16)}if(data&&data.bucket&&"object"==typeof data.bucket){var w=data.bucket;for(var y in w)if("object"==typeof w[y])for(var S in w[y])v[v.length]="ls_c."+y+"."+S+"=0x"+w[y][S].value.toString(16)+",0x"+w[y][S].first_set.toString(16)+",0x"+w[y][S].last_set.toString(16)}e=e.replace(/\$localstorage\$/,v.length?"&"+v.join("&"):"",e),e=B("storagetype","rp_s","l",e)}else e=B("localstorage","localstorage",null,e),e=B("storagetype","rp_s","c",e);if(e=B("rp_schain","rp_schain",SchainValidator.validateSchainString(this.context.rp_schain)?this.context.rp_schain:null,e),"jsonp"==this.context.rp_adtype&&(E=this,window.rp_onAdResponseLoaded=function(t){E.onAdResponseLoaded(t)}),this.shouldRouteToRFM())for(var A=["rp_page","rp_inventory","rp_visitor","rp_gender","rp_age","rp_age_range","rp_age_dob","rp_ethnicity","rp_xpi","rp_kw","rp_tracking","rp_floor","rp_smartfile","rp_geo"],u=0;u<A.length;u++)void 0!==this.context[A[u]]&&null!=this.context[A[u]]&&(window[A[u]]=this.context[A[u]]);var R=new RubiconAdServing.Requests,k=this.context.rp_feature_set.latency_sampling_sites,z=0===k.length||P(this.context.rp_site,k),j={slot:this,url:e,context:this.context,timer:z&&Math.random()<this.context.rp_feature_set.latency_sampling};R.addRequest(this.context.rp_zonesize,j);try{var D,O,C,E,T=this.context.rp_feature_set.jit_sync&&(this.browser.detectSafari()||this.browser.detectiPhone()||this.browser.detectiPad()),I=this.context.rp_feature_set.jit_sync_android&&this.browser.detectAndroid();(T||I)&&(D=[2054,2138,2149,2532,3410],C=r+"gum.criteo.com/sync?c=2&r=2&j="+(O=(O="rp_onUserIdLoaded_"+this.context.rp_zonesize).replace("-","_")),E=this,window[O]=function(t){E.onUserIdLoaded(D,j,t)},document.write("<script type='text/javascript' src='"+C+"'><\/script>"))}catch(t){}document.write("<script type='text/javascript'>rp_requests = new RubiconAdServing.Requests(); rp_requests.sendRequest('"+this.context.rp_zonesize+"');<\/script>")}},this.onUserIdLoaded=function(t,e,i){if(t&&i&&"OK"==i.status&&i.userid)for(var r,n=0;n<t.length;n++)r=t[n],e.url=e.url+="&put_"+r+"="+encodeURIComponent(i.userid)},this.filter_script=function(t){return t=(t=t.replace(/\/SCRIPT/g,'/SCR"+"IPT')).replace(/\/script/g,'/scr"+"ipt')},this.onAdResponseLoaded=function(t){var e;try{if(t.ads)for(var i=0;i<t.ads.length;i++){e=t.ads[i];var r=["script","html"];for(var n in r){var o=r[n];e[o]&&"string"==typeof e[o]&&(e[o]=decodeURIComponent(e[o]),"function"==typeof this["filter_"+o]&&(e[o]=this["filter_"+o](e[o])))}this.context.rp_slot&&(e.rp_slot=this.context.rp_slot);var s=new RubiconAdServing.Creatives,c=t.account_id+"/"+t.site_id+"/"+t.zone_id+"-"+t.size_id;s.setAd(c,e),c=this.context.rp_slot,s.setAd(c,e)}this.context.rp_callback&&("function"==typeof this.context.rp_callback&&this.context.rp_callback(t),"string"==typeof this.context.rp_callback&&window[this.context.rp_callback]&&"function"==typeof window[this.context.rp_callback]&&window[this.context.rp_callback](t))}catch(t){}},this.getSupportExpandableAd=function(){return!RubiconAdServing.Utils.isIframe()&&"iframe"!=this.context.rp_adtype};var M=function(t){return!!t&&"[object Array]"===Object.prototype.toString.apply(t)&&"number"==typeof t.length&&0<t.length},P=function(t,e){for(var i=0;i<e.length;i++)if(t===e[i])return!0;return!1},B=function(t,e,i,r,n){return q(t,null!=i?(!0===n?"":"&")+e+"="+i:"",r)},q=function(t,e,i){return"string"==typeof t&&null!==t&&0<t.length?i.replace("$"+t+"$",e):i};this.appendObject=function(t,e,i,r,n){var o,s="";if(i)for(var c in n=n||".",i)i.hasOwnProperty(c)&&null!=(o=i[c])&&(void 0===o.length||0<o.length)&&(s+="boolean"==typeof o?"&"+e+n+c+"="+(o?1:0):"&"+e+n+c+"="+encodeURIComponent(o));return r=q(t,s,r)};var N=function(){var e=null;try{if(!RubiconAdServing.Utils.isIframeCrossDomain()){var t,i=window,r=p(),n=90;if(RubiconAdServing.Utils.isIframe()){for(;window.top!==i.parent;){i=i.parent;try{i.location.href}catch(t){return e}}t=d(i.frameElement),n=i.frameElement.clientHeight/2}else{for(var o=document.documentElement;o.childNodes.length&&1==o.lastChild.nodeType;)o=o.lastChild;var s=document.createElement("div"),c=a("rubicon_chk_position_");s.setAttribute("id",c),s.style.width="0px",s.style.height="0px",o.parentNode.appendChild(s),t=d(s),o.parentNode.removeChild(s),n/=2}e=r.y+r.h<n+t.y||r.y>n+t.y?"btf":"atf"}}catch(t){}return e},a=function(t){return t+Math.floor(1e6*Math.random())},p=function(){return window.frameElement?{x:window.top.innerWidth,y:window.top.pageYOffset||window.top.document.body.scrollTop||window.top.document.documentElement.scrollTop,w:window.top.innerWidth||window.top.documentElement.clientWidth||window.top.getElementsByTagName("body")[0].clientWidth,h:window.top.innerHeight||window.top.documentElement.clientHeight||window.top.getElementsByTagName("body")[0].clientHeight}:{x:window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,y:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,w:window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,h:window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}},F=function(){try{return window.screen.width+"x"+window.screen.height}catch(t){}},d=function(t){var e=0,i=0;if(t.offsetParent)for(;e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;);return{x:e,y:i}},o=function(i){this.navigator=i,this.safariMatching=[{text:i.vendor,pattern:"Apple"}],this.ipadMatching=[{text:i.userAgent,pattern:"iPad"},{text:i.userAgent,pattern:"OS X"}],this.iphoneMatching=[{text:i.userAgent,pattern:"iPhone"},{text:i.userAgent,pattern:"OS X"}],this.androidMatching=[{text:i.userAgent,pattern:"Android"}],this.detectSafari=function(){return this.matchesAny(this.safariMatching)},this.detectiPad=function(){return this.matchesAll(this.ipadMatching)},this.detectiPhone=function(){return this.matchesAll(this.iphoneMatching)},this.detectAndroid=function(){return this.matchesAll(this.androidMatching)},this.detectIE8Plus=function(){var t,e=0;return i&&"Microsoft Internet Explorer"==i.appName&&(t=i.userAgent,null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))),8<=e},this.matchesAny=function(t){for(var e=0;e<t.length;e++){var i=t[e].text;if(i&&-1!=i.indexOf(t[e].pattern))return!0}return!1},this.matchesAll=function(t){for(var e=0,i=0;i<t.length;i++){var r=t[i].text;r&&0<=r.indexOf(t[i].pattern)&&e++}return 0<e&&e==t.length}}},RubiconAdServing.getStoredData=function(){try{var t=localStorage.rubiconSmartTagData;if(t){var e=JSON.parse(t);if("object"==typeof e)return e}}catch(t){return{}}return{}},RubiconAdServing.storeData=function(t){try{localStorage.rubiconSmartTagData=JSON.stringify(t)}catch(t){}},RubiconAdServing.enforceFCapStructure=function(t,e,i,r){return t.fcaps||(t.fcaps={}),t.fcaps.sizes||(t.fcaps.sizes={}),t.fcaps.sizes[e]||(t.fcaps.sizes[e]={}),t.fcaps.sizes[e].ads||(t.fcaps.sizes[e].ads={}),t.fcaps.sizes[e].ads[i]||(t.fcaps.sizes[e].ads[i]={count:0,ad_id:i,first_seen:r,last_seen:r}),t},RubiconAdServing.setFCap=function(t,e,i,r){var n=RubiconAdServing.getStoredData();(n=RubiconAdServing.enforceFCapStructure(n,t,e,r)).fcaps.sizes[t].ads[e].count=i,n.fcaps.sizes[t].ads[e].last_seen=r,RubiconAdServing.storeData(n)},RubiconAdServing.incFCap=function(t,e,i,r){var n=RubiconAdServing.getStoredData();(n=RubiconAdServing.enforceFCapStructure(n,t,e,r)).fcaps.sizes[t].ads[e].count+=i,n.fcaps.sizes[t].ads[e].last_seen=r,RubiconAdServing.storeData(n)},RubiconAdServing.decFCap=function(t,e,i,r){var n=RubiconAdServing.getStoredData();(n=RubiconAdServing.enforceFCapStructure(n,t,e,r)).fcaps.sizes[t].ads[e].count-=i,n.fcaps.sizes[t].ads[e].last_seen=r,RubiconAdServing.storeData(n)},RubiconAdServing.delFCap=function(t,e){var i=RubiconAdServing.getStoredData();delete(i=RubiconAdServing.enforceFCapStructure(i,t,e,0)).fcaps.sizes[t].ads[e],"{}"===JSON.stringify(i.fcaps.sizes[t].ads)&&delete i.fcaps.sizes[t],"{}"===JSON.stringify(i.fcaps.sizes)&&delete i.fcaps.sizes,RubiconAdServing.storeData(i)},RubiconAdServing.enforceBucketStructure=function(t,e,i,r){return"object"!=typeof t.bucket&&(t.bucket={}),"object"!=typeof t.bucket[e]&&(t.bucket[e]={}),"object"!=typeof t.bucket[e][i]&&(t.bucket[e][i]={first_set:r,value:0}),t},RubiconAdServing.setBucketValue=function(t,e,i,r){var n=RubiconAdServing.getStoredData();(n=RubiconAdServing.enforceBucketStructure(n,t,e,r)).bucket[t][e].value=i,n.bucket[t][e].last_set=r,RubiconAdServing.storeData(n)},RubiconAdServing.incBucketValue=function(t,e,i,r){var n=RubiconAdServing.getStoredData();(n=RubiconAdServing.enforceBucketStructure(n,t,e,r)).bucket[t][e].value+=i,n.bucket[t][e].last_set=r,RubiconAdServing.storeData(n)},RubiconAdServing.decBucketValue=function(t,e,i,r){var n=RubiconAdServing.getStoredData();(n=RubiconAdServing.enforceBucketStructure(n,t,e,r)).bucket[t][e].value-=i,n.bucket[t][e].last_set=r,RubiconAdServing.storeData(n)},RubiconAdServing.delBucketValue=function(t,e){var i=RubiconAdServing.getStoredData();delete(i=RubiconAdServing.enforceBucketStructure(i,t,e,0)).bucket[t][e],"{}"===JSON.stringify(i.bucket[t])&&delete i.bucket[t],RubiconAdServing.storeData(i)},RubiconAdServing.init=function(t){try{var e,i=new RubiconAdServing.RubiconAd,r=new Object,n=t.tcf||t.gdpr;n&&("object"==typeof n?("string"==typeof n.consentData&&(r.gdpr_consent=n.consentData),void 0!==n.gdprApplies&&(r.gdpr=n.gdprApplies?1:0)):r.gdpr_consent=n);var o,s=t.ccpa;s&&"object"==typeof s&&"string"==typeof s.uspString&&(r.us_privacy=encodeURIComponent(s.uspString)),o=["rp_account","rp_site","rp_zonesize","rp_ad","rp_height","rp_width","rp_floor","rp_pmp_tier","rp_rtb_tier","rp_rtb_floor","rp_lat","rp_long","rp_slot"];for(var c=0;c<o.length;c++)e=o[c],null==window[e]||"string"!=typeof window[e]&&"number"!=typeof window[e]||(r[e]=window[e],window[e]=void 0);o=["rp_adtype","rp_page","rp_ae_spoof","rp_env","rp_host","rp_facebook_device_id","rp_publisher_id","rp_app_id","rp_div_id","rp_schain"];for(c=0;c<o.length;c++)e=o[c],window[e]&&"string"==typeof window[e]&&(r[e]=window[e],window[e]=void 0);o=["rp_gender","rp_age","rp_age_range","rp_age_dob","rp_ethnicity","rp_xpi","rp_kw","rp_tracking","rp_user_key","rp_blocks"];for(c=0;c<o.length;c++)e=o[c],window[e]&&("string"==typeof window[e]&&"[INSERT"!=window[e].substr(0,7)||"number"==typeof window[e])&&(r[e]=window[e],window[e]=void 0);o=["rp_debug","rp_inventory","rp_visitor","rp_app","rp_device","rp_geo","rp_accept","rp_feature_set","rp_dpf","rp_aso","rp_navigator","rp_badvid","rp_fastlane"];for(c=0;c<o.length;c++)e=o[c],!window[e]||"object"!=typeof window[e]&&"boolean"!=typeof window[e]||(r[e]=window[e],window[e]=void 0);o=["rp_smartfile"];for(c=0;c<o.length;c++)e=o[c],window[e]&&"string"==typeof window[e]&&"[SMART"!=window[e].substr(0,6)&&(r[e]=window[e],window[e]=void 0);try{var a=window.rpx_params.device.lmt;a&&"false"!==a&&"0"!==a&&(r.rp_lmt=1)}catch(t){}o=["rp_callback"];for(c=0;c<o.length;c++)e=o[c],!window[e]||"function"!=typeof window[e]&&"string"!=typeof window[e]||(r[e]=window[e],window[e]=void 0);i.init(r),i.start()}catch(t){}},new ConsentManagement(RubiconAdServing.init).run();